"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[880],{8880:(e,n,t)=>{t.r(n),t.d(n,{default:()=>N});var o,a=t(5893),r=function(e){return null==e?void 0:e.loginForm},s=t(7168),c=t(9669),i=t.n(c),l=t(3362),u=t(7665);!function(e){e.INCORRECT_DATA="",e.SERVER_ERROR=""}(o||(o={}));var f=(0,s.hg)("login/loginByUsername",(function(e,n){return t=void 0,o=void 0,r=function(){var t,o;return function(e,n){var t,o,a,r,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=n.call(e,s)}catch(e){r=[6,e],o=0}finally{t=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,i().post("http://localhost:8000/login",e)];case 1:if(!(t=a.sent().data))throw new Error;return localStorage.setItem(u.z,JSON.stringify(t)),n.dispatch(l.hI.setAuthData(t)),[2,t];case 2:return o=a.sent(),console.log(o),[2,n.rejectWithValue("Вы ввели неверный логин или пароль")];case 3:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,n){function s(e){try{i(r.next(e))}catch(e){n(e)}}function c(e){try{i(r.throw(e))}catch(e){n(e)}}function i(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,c)}i((r=r.apply(t,o||[])).next())}));var t,o,a,r})),d=(0,s.oM)({name:"login",initialState:{username:"",password:"",isLoading:!1},reducers:{setUsername:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(f.pending,(function(e){e.error=void 0,e.isLoading=!0})),e.addCase(f.fulfilled,(function(e){e.isLoading=!1})),e.addCase(f.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),p=d.actions,v=d.reducer,h=t(7294),y=t(2327),g=t(9704),m=t(4611),b=t(219);var w=function(){return w=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)},x=(0,h.memo)((function(e){var n=e.className,t=e.value,o=void 0===t?"":t,r=e.onChange,s=e.placeholder,c=e.type,i=void 0===c?"text":c,l=e.autofocus,u=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(t[o[a]]=e[o[a]])}return t}(e,["className","value","onChange","placeholder","type","autofocus"]),f=(0,y.$)().t,d=(0,h.useRef)(),p=(0,h.useState)(!1),v=p[0],g=p[1],b=(0,h.useState)(o.length),x=b[0],j=b[1],O=function(){g(!1)};return(0,h.useCallback)((function(e){"Escape"===e.key&&O()}),[]),(0,h.useEffect)((function(){l&&(g(!0),d.current.focus())}),[]),(0,a.jsxs)("div",w({className:(0,m.A)("LuFDUWoP",{},[n])},{children:[s&&(0,a.jsx)("div",w({className:"emAQQ85i"},{children:"".concat(f(s),">")}),void 0),(0,a.jsxs)("div",w({className:"y1GiFC_L"},{children:[(0,a.jsx)("input",w({ref:d,type:i,value:o,onChange:function(e){null==r||r(e.target.value),j(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){g(!0)},onBlur:O,onSelect:function(e){var n;j((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)}},u),void 0),v&&(0,a.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(8.8*x,"px")}},void 0)]}),void 0)]}),void 0)}));const j="PQPa1eB5";var O=t(9312),C=function(){return C=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const N=(0,h.memo)((function(e){var n=e.className,t=(0,y.$)().t,o=(0,g.I0)(),s=(0,g.oR)();(0,h.useEffect)((function(){s.reducerManager.add("loginForm",v)}),[]);var c=(0,g.v9)(r),i=c.username,l=c.password,u=c.error,d=c.isLoading,w=(0,h.useCallback)((function(e){o(p.setUsername(e))}),[o]),N=(0,h.useCallback)((function(e){o(p.setPassword(e))}),[o]),k=(0,h.useCallback)((function(){o(f({username:i,password:l}))}),[o,l,i]);return(0,h.useEffect)((function(){return function(){w(""),N("")}}),[]),(0,a.jsxs)("div",C({className:(0,m.A)("xYNEfcE9",{},[n])},{children:[(0,a.jsx)(O.x,{title:"Форма авторизации"},void 0),u&&(0,a.jsx)(O.x,{text:u,theme:O.l.ERROR},void 0),(0,a.jsx)(x,{autofocus:!0,placeholder:"Имя пользователя",className:j,value:i,onChange:w},void 0),(0,a.jsx)(x,{placeholder:"Пароль",className:j,value:l,onChange:N},void 0),(0,a.jsx)(b.zx,C({onClick:k,theme:b.bn.OUTLINE,className:"Ok_5amJo",disabled:d},{children:t("Войти")}),void 0)]}),void 0)}))}}]);