"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[106],{6232:function(e,t,a){a.d(t,{p:function(){return o}});var n=a(6540),r=a(423),s=a(35),c={input:"LVdIPwcx",caretWrapper:"y1GiFC_L",caret:"lqMFGBuL",readonly:"fTN1PnWu"},l=a(4848);const o=e=>{const{className:t,value:a="",onChange:o,placeholder:d,type:u="text",autofocus:m,readonly:i,"data-testid":p="Input",...x}=e,h=(0,n.useRef)(),[f,j]=(0,n.useState)(!1),[C,v]=(0,n.useState)(a?.length),g=f&&!i;return(0,n.useEffect)((()=>{m&&(j(!0),h.current.focus())}),[m]),(0,l.jsxs)(s.z,{gap:"4",className:(0,r.x)("",{[c.readonly]:i},[t]),children:[d&&(0,l.jsx)("div",{className:c.placeholder,children:`${d}> `}),(0,l.jsxs)("div",{className:c.caretWrapper,children:[(0,l.jsx)("input",{ref:h,type:u,value:a,onChange:e=>{o?.(e.target.value),v(e.target.value.length)},className:c.input,onFocus:()=>{j(!0)},onBlur:()=>{j(!1)},onSelect:e=>{v(e?.target?.selectionStart||0)},readOnly:i,...x}),g&&(0,l.jsx)("span",{className:c.caret,style:{left:8.8*C+"px"}})]})]})}},7106:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=a(6540),r=a(6142),s=a(1338),c=a(423),l=a(8623),o=a(2828),d=a(42),u=a(6232),m=a(5701);const i=e=>e?.addCommentForm?.error,p=e=>e?.addCommentForm?.text??"";var x=a(35);const h=(0,a(38).Z0)({name:"addCommentForm",initialState:{text:"",error:void 0},reducers:{setText(e,t){e.text=t.payload}}}),{actions:f}=h,{reducer:j}=h;var C=a(4848);const v={addCommentForm:j};var g=(0,n.memo)((e=>{const{className:t,onSendComment:a}=e,{t:h}=(0,r.B)(),j=(0,o.j)(),[g,N]=(0,n.useState)(!0),y=(0,s.d4)(i),F=(0,s.d4)(p),k=(0,n.useCallback)((e=>{e.length&&g?N(!1):e.length||g||N(!0),j(f.setText(e))}),[j,g]),S=(0,n.useCallback)((()=>{a(F||""),k("")}),[k,a,F]);return(0,C.jsx)(l.H,{reducers:v,children:(0,C.jsx)(x.z,{max:!0,className:(0,c.x)("MGeHamRn",{},[t]),children:y?(0,C.jsx)(m.EY,{theme:m.$G.ERROR,text:h("Произошла непредвиденная ошибка")}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(u.p,{className:"KxmbMJIH",onChange:k,value:F,placeholder:h("Введите комментарий")}),(0,C.jsx)(d.$n,{disabled:g,onClick:S,theme:d.Ox.OUTLINE,children:h("Отправить")})]})})})}))}}]);