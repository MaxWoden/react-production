"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[838],{596:(e,n,a)=>{a.d(n,{Z:()=>l});var t,r=a(7294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},o.apply(null,arguments)}const l=function(e){return r.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),t||(t=r.createElement("path",{fillRule:"evenodd",d:"m3.99 16.854-1.314 3.504a.75.75 0 0 0 .966.965l3.503-1.314a3 3 0 0 0 1.068-.687L18.36 9.175s-.354-1.061-1.414-2.122-2.122-1.414-2.122-1.414L4.677 15.786a3 3 0 0 0-.687 1.068m12.249-12.63 1.383-1.383c.248-.248.579-.406.925-.348.487.08 1.232.322 1.934 1.025.703.703.945 1.447 1.025 1.934.058.346-.1.677-.348.925L19.774 7.76s-.353-1.06-1.414-2.12c-1.06-1.062-2.121-1.415-2.121-1.415z",clipRule:"evenodd"})))}},6838:(e,n,a)=>{a.r(n),a.d(n,{default:()=>ae});var t,r=a(5893),o=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.data},l=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.error},i=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.isLoading},c=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.readonly},u=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.validateErrors},s=a(7168),d=a(9381),f=(0,s.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,t=void 0,o=function(){var a,t,r,o;return function(e,n){var a,t,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(a=1,t&&(r=2&i[0]?t.return:i[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,i[1])).done)return r;switch(t=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],t=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(l){switch(l.label){case 0:if(a=n.extra,t=n.rejectWithValue,!e)return[2,t("error")];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.api.get("".concat(d.h3.profile).concat(e))];case 2:if(!(r=l.sent().data))throw new Error;return[2,r];case 3:return o=l.sent(),console.log(o),[2,t("error")];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof r?a:new r((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,t||[])).next())}));var a,t,r,o})),v=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.form};!function(e){e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR",e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_CITY="INCORRECT_CITY"}(t||(t={}));var h,p=(0,s.hg)("profile/updateProfileData",(function(e,n){return a=void 0,r=void 0,l=function(){var e,a,r,o,l,i,c;return function(e,n){var a,t,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(a=1,t&&(r=2&i[0]?t.return:i[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,i[1])).done)return r;switch(t=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],t=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(u){switch(u.label){case 0:if(e=n.extra,a=n.rejectWithValue,r=n.getState,(null==(o=v(r()))?void 0:o.id)||a([t.SERVER_ERROR]),(l=function(e){if(!e)return[t.NO_DATA];var n=e.firstname,a=e.lastname,r=e.age,o=e.city,l=[];return n&&a||l.push(t.INCORRECT_USER_DATA),r&&Number.isInteger(r)||l.push(t.INCORRECT_AGE),o||l.push(t.INCORRECT_CITY),l}(o)).length)return[2,a(l)];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(null==o?void 0:o.id),o)];case 2:if(!(i=u.sent().data))throw new Error;return[2,i];case 3:return c=u.sent(),console.log(c),[2,a([t.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function t(e){try{c(l.next(e))}catch(e){n(e)}}function i(e){try{c(l.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(t,i)}c((l=l.apply(a,r||[])).next())}));var a,r,o,l})),m=function(){return m=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},m.apply(this,arguments)},y=(0,s.oM)({name:"profile",initialState:{data:void 0,isLoading:!1,error:void 0,readonly:!0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},updateProfile:function(e,n){e.form=m(m({},e.form),n.payload)},saveEdit:function(e){e.readonly=!0,e.data=e.form},cancelEdit:function(e){e.readonly=!0,e.form=e.data,e.validateErrors=void 0}},extraReducers:function(e){e.addCase(f.pending,(function(e){e.isLoading=!0,e.error=void 0})).addCase(f.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(f.rejected,(function(e,n){e.isLoading=!1,e.readonly=!0,e.error=n.payload})).addCase(p.pending,(function(e){e.isLoading=!0,e.validateErrors=void 0})).addCase(p.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(p.rejected,(function(e,n){e.isLoading=!1,e.readonly=!0,e.validateErrors=n.payload}))}}),g=y.actions,C=y.reducer;!function(e){e.RU="Russia",e.BY="Belarus",e.UA="Ukraine",e.AM="Armenia",e.KZ="Kazakhstan"}(h||(h={}));var R,b=a(7294),x=a(2327),E=a(4743),j=[{value:h.AM,content:"Армения"},{value:h.BY,content:"Беларусь"},{value:h.KZ,content:"Казахстан"},{value:h.RU,content:"Россия"},{value:h.UA,content:"Украина"}],N=(0,b.memo)((function(e){var n=e.className,a=e.readonly,t=e.value,o=e.onChange,l=(0,x.$)().t,i=(0,b.useCallback)((function(e){null==o||o(e)}),[o]);return(0,r.jsx)(E.P,{className:n,label:l("Укажите страну"),readonly:a,options:j,value:t,onSelect:i})}));!function(e){e.USD="USD",e.EUR="EUR",e.RUB="RUB"}(R||(R={}));var w=[{value:R.RUB,content:"Рубли"},{value:R.EUR,content:"Евро"},{value:R.USD,content:"Доллары"}],O=(0,b.memo)((function(e){var n=e.className,a=e.readonly,t=e.value,o=e.onChange,l=(0,x.$)().t,i=(0,b.useCallback)((function(e){null==o||o(e)}),[o]);return(0,r.jsx)(E.P,{className:n,label:l("Укажите валюту"),readonly:a,options:w,value:t,onSelect:i})})),A=a(4611),S=a(1911),T=a(4456),I=a(0),k=a(9312);const P="wW9jgKKD",_="ZTyX8_n9";var L,U=function(e){var n,a=e.className,t=e.data,o=e.isLoading,l=e.error,i=e.readonly,c=e.onChangeFirstname,u=e.onChangeLastname,s=e.onChangeAge,d=e.onChangeCity,f=e.onChangeUsername,v=e.onChangeAvatar,h=e.onChangeCurrency,p=e.onChangeCountry,m=(0,x.$)().t;if(o)return(0,r.jsx)("div",{className:(0,A.A)(P,{},["t07ZxFGs",a]),children:(0,r.jsx)(I.a,{})});if(l)return(0,r.jsx)("div",{className:(0,A.A)(P,{},["i5YK3SSb",a]),children:(0,r.jsx)(k.xv,{align:k.PH.CENTER,theme:k.lg.ERROR,title:m("Произошла ошибка при загрузке страницы"),text:m("Попробуйте обновить страницу")})});var y=((n={}).DjTe7269=!i,n);return(0,r.jsx)("div",{className:(0,A.A)(P,y,[a]),children:(0,r.jsxs)("div",{className:"mem1neCT",children:[(null==t?void 0:t.avatar)&&(0,r.jsx)("div",{className:"bEFNSahN",children:(0,r.jsx)(S.q,{alt:"avatar",src:null==t?void 0:t.avatar})}),(0,r.jsx)(T.I,{readonly:i,onChange:c,className:_,value:null==t?void 0:t.firstname,placeholder:m("Ваше имя")}),(0,r.jsx)(T.I,{readonly:i,onChange:u,className:_,value:null==t?void 0:t.lastname,placeholder:m("Ваша фамилия")}),(0,r.jsx)(T.I,{readonly:i,onChange:s,className:_,value:String(null==t?void 0:t.age),placeholder:m("Ваш возраст")}),(0,r.jsx)(T.I,{readonly:i,onChange:d,className:_,value:null==t?void 0:t.city,placeholder:m("Ваш город")}),(0,r.jsx)(T.I,{readonly:i,onChange:f,className:_,value:String(null==t?void 0:t.username),placeholder:m("Ваше имя пользователя")}),(0,r.jsx)(T.I,{readonly:i,onChange:v,className:_,value:String(null==t?void 0:t.avatar),placeholder:m("Введите ссылку на аватар")}),(0,r.jsx)(N,{readonly:i,value:null==t?void 0:t.country,className:_,onChange:p}),(0,r.jsx)(O,{readonly:i,value:null==t?void 0:t.currency,className:_,onChange:h})]})})},D=a(9704);function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},B.apply(null,arguments)}const G=function(e){return b.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 512 512"},e),L||(L=b.createElement("path",{fillRule:"evenodd",d:"M420.48 121.813 390.187 91.52 256 225.92 121.813 91.52 91.52 121.813l134.4 134.188-134.4 134.186 30.293 30.293L256 286.08l134.187 134.4 30.293-30.293L286.08 256z"})))};var M;function F(){return F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},F.apply(null,arguments)}const W=function(e){return b.createElement("svg",F({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,viewBox:"0 0 492 492"},e),M||(M=b.createElement("path",{d:"m484.128 104.478-16.116-16.116c-5.064-5.068-11.816-7.856-19.024-7.856s-13.964 2.788-19.028 7.856L203.508 314.81 62.024 173.322c-5.064-5.06-11.82-7.852-19.028-7.852-7.204 0-13.956 2.792-19.024 7.852l-16.12 16.112C2.784 194.51 0 201.27 0 208.47c0 7.204 2.784 13.96 7.852 19.028l159.744 159.736c.212.3.436.58.696.836l16.12 15.852c5.064 5.048 11.82 7.572 19.084 7.572h.084c7.212 0 13.968-2.524 19.024-7.572l16.124-15.992c.26-.256.48-.468.612-.684l244.784-244.76c10.5-10.476 10.5-27.52.004-38.008"})))};var K=a(596),V=a(5461),Y=a(219),Z=a(5470);const z="vP5lJqeW",q="CZmhQU1N";var Q=function(e){var n=(0,x.$)().t,a=e.className,t=e.readonly,l=(0,V.T)(),i=(0,D.v9)(o),c=(0,D.v9)(Z.m5),u=(null==i?void 0:i.id)===(null==c?void 0:c.id),s=(0,b.useCallback)((function(){l(g.setReadonly(!1))}),[l]),d=(0,b.useCallback)((function(){!l(p()).then((function(e){return null==e?void 0:e.payload}))&&l(g.saveEdit())}),[l]),f=(0,b.useCallback)((function(){l(g.cancelEdit())}),[l]);return(0,r.jsxs)("div",{className:(0,A.A)("FPJSgL1_",{},[a]),children:[(0,r.jsx)(k.xv,{title:n(u?"Ваш профиль":"Профиль")}),u&&(0,r.jsx)("div",{className:"A0xDMvED",children:t?(0,r.jsxs)(Y.zx,{onClick:s,className:z,theme:Y.bn.OUTLINE,children:[(0,r.jsx)(K.Z,{className:(0,A.A)(q,{},["ik6RYgje"])}),n("Редактировать")]}):(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsxs)(Y.zx,{onClick:d,theme:Y.bn.OUTLINE_GREEN,className:z,children:[(0,r.jsx)(W,{className:(0,A.A)(q,{},["R7emLfqP"])}),n("Сохранить")]}),(0,r.jsxs)(Y.zx,{onClick:f,theme:Y.bn.OUTLINE_RED,className:z,children:[(0,r.jsx)(G,{className:(0,A.A)(q,{},["_9SBwQomw"])}),n("Отменить")]})]})})]})},$=a(6974),J=a(9585),H=a(6308),X=a(9950),ee={profile:C},ne=function(){var e,n=(0,x.$)().t,a=(0,V.T)(),o=(0,$.UO)().id,s=(0,D.v9)(v),d=(0,D.v9)(l),h=(0,D.v9)(i),p=(0,D.v9)(c),m=(0,D.v9)(u),y=((e={})[t.INCORRECT_AGE]=n("Неккоректный возраст"),e[t.INCORRECT_CITY]=n("Неккоректный регион"),e[t.INCORRECT_USER_DATA]=n("Имя и фамилия обязательны"),e[t.NO_DATA]=n("Данные не указаны"),e[t.SERVER_ERROR]=n("Ошибка сервера"),e);(0,H.Q)((function(){return a(f(o))}));var C=(0,b.useCallback)((function(e){a(g.updateProfile({firstname:e||""}))}),[a]),R=(0,b.useCallback)((function(e){a(g.updateProfile({lastname:e||""}))}),[a]),E=(0,b.useCallback)((function(e){a(g.updateProfile({age:0|Number(e)}))}),[a]),j=(0,b.useCallback)((function(e){a(g.updateProfile({city:e||""}))}),[a]),N=(0,b.useCallback)((function(e){a(g.updateProfile({username:e||""}))}),[a]),w=(0,b.useCallback)((function(e){a(g.updateProfile({avatar:e||""}))}),[a]),O=(0,b.useCallback)((function(e){a(g.updateProfile({currency:e}))}),[a]),A=(0,b.useCallback)((function(e){a(g.updateProfile({country:e}))}),[a]);return(0,r.jsx)(J.W,{reducers:ee,children:(0,r.jsxs)(X.T3,{children:[(0,r.jsx)(Q,{readonly:p}),(null==m?void 0:m.length)&&m.map((function(e){return(0,r.jsx)(k.xv,{theme:k.lg.ERROR,text:y[e]},e)})),(0,r.jsx)(U,{data:s,isLoading:h,error:d,readonly:p,onChangeFirstname:C,onChangeLastname:R,onChangeAge:E,onChangeCity:j,onChangeUsername:N,onChangeAvatar:w,onChangeCurrency:O,onChangeCountry:A})]})})};const ae=(0,b.memo)(ne)},9585:(e,n,a)=>{a.d(n,{W:()=>l});var t=a(5893),r=a(7294),o=a(9704),l=function(e){var n=e.children,a=e.reducers,l=e.removeAfterRemount,i=void 0===l||l,c=(0,o.I0)(),u=(0,o.oR)();return(0,r.useEffect)((function(){var e=u.reducerManager.getReducerMap();if(Object.entries(a).forEach((function(n){var a=n[0],t=n[1];a in e||(u.reducerManager.add(a,t),c({type:"@INIT ".concat(a," reducer")}))})),i)return function(){Object.entries(a).forEach((function(e){var n=e[0];u.reducerManager.remove(n),c({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,t.jsx)(t.Fragment,{children:n})}},1911:(e,n,a)=>{a.d(n,{q:()=>l});var t=a(5893),r=a(4611);var o=a(7294),l=function(e){var n=e.className,a=e.src,l=e.size,i=e.alt,c=(0,o.useMemo)((function(){return{width:l||100,height:l||100}}),[l]);return(0,t.jsx)("img",{alt:i,src:a,style:c,className:(0,r.A)("ZqPdwJxd",{},[n])})}},4456:(e,n,a)=>{a.d(n,{I:()=>i});var t=a(5893),r=a(7294),o=a(4611);var l=function(){return l=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},l.apply(this,arguments)},i=(0,r.memo)((function(e){var n,a=e.className,i=e.value,c=void 0===i?"":i,u=e.onChange,s=e.placeholder,d=e.type,f=void 0===d?"text":d,v=e.autofocus,h=e.readonly,p=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]])}return a}(e,["className","value","onChange","placeholder","type","autofocus","readonly"]),m=(0,r.useRef)(),y=(0,r.useState)(!1),g=y[0],C=y[1],R=(0,r.useState)(null==c?void 0:c.length),b=R[0],x=R[1],E=g&&!h;return(0,r.useEffect)((function(){v&&(C(!0),m.current.focus())}),[]),(0,t.jsxs)("div",{className:(0,o.A)("LuFDUWoP",(n={},n.fTN1PnWu=h,n),[a]),children:[s&&(0,t.jsx)("div",{className:"emAQQ85i",children:"".concat(s,"> ")}),(0,t.jsxs)("div",{className:"y1GiFC_L",children:[(0,t.jsx)("input",l({ref:m,type:f,value:c,onChange:function(e){null==u||u(e.target.value),x(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){C(!0)},onBlur:function(){C(!1)},onSelect:function(e){var n;x((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)},readOnly:h},p)),E&&(0,t.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(8.8*b,"px")}})]})]})}))},4743:(e,n,a)=>{a.d(n,{P:()=>l});var t=a(5893),r=a(7294),o=a(4611);var l=function(e){var n,a=e.className,l=e.options,i=e.onSelect,c=e.label,u=e.value,s=e.readonly,d=(0,r.useState)(!1),f=d[0],v=d[1],h=(0,r.useState)(l[0]),p=h[0],m=h[1];(0,r.useEffect)((function(){u&&m(l.find((function(e){return e.value===u})))}),[u]);var y=(0,r.useCallback)((function(e,n){e.stopPropagation(),i(n.value),m(n),g()}),[]),g=function(){s||v((function(e){return!e}))};(0,r.useEffect)((function(){s&&v(!1)}),[s]);var C=(0,r.useMemo)((function(){return null==l?void 0:l.map((function(e){var n;return(0,t.jsx)("li",{className:(0,o.A)("zZgj2JgW",(n={},n.rKHhU8sR=p.value===e.value,n)),onClick:function(n){return y(n,e)},children:e.content},e.value)}))}),[l,p]);return(0,t.jsxs)("div",{className:(0,o.A)("eXu4wq7K",(n={},n.HaBgyfSK=s,n),[a]),children:[c&&(0,t.jsx)("span",{className:"G1uuf7Bp",children:"".concat(c,">")}),(0,t.jsx)("div",{className:"t4ay1peO",onClick:g,children:p.content}),f&&(0,t.jsx)("ul",{className:"xWiG1Vj4",onClick:g,children:C})]})}}}]);