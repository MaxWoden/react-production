"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[885],{1282:function(e,t,a){a.d(t,{Xq:function(){return r},_W:function(){return l},lD:function(){return s}});const n=a(7867).q.injectEndpoints({endpoints:e=>({getArticleRating:e.query({query:e=>{let{userId:t,articleId:a}=e;return{url:"/article-ratings",params:{userId:t,articleId:a}}}}),getAllArticleRatings:e.query({query:e=>({url:"/article-ratings",params:{articleId:e}})}),rateArticle:e.mutation({query:e=>({url:"/article-ratings",method:"POST",body:e})})})}),s=n.useGetArticleRatingQuery,r=n.useGetAllArticleRatingsQuery,l=n.useRateArticleMutation},3885:function(e,t,a){a.r(t);var n=a(8697),s=a(6540),r=a(1282),l=a(4848);const c=e=>{const{className:t,articleId:a}=e,{data:s,isLoading:c}=(0,r.Xq)(a);return(0,l.jsx)(n.D,{className:t,isLoading:c,data:s})};t.default=(0,s.memo)(c)},6232:function(e,t,a){a.d(t,{p:function(){return i}});var n=a(6540),s=a(423),r=a(35),l={input:"LVdIPwcx",caretWrapper:"y1GiFC_L",caret:"lqMFGBuL",readonly:"fTN1PnWu"},c=a(4848);const i=e=>{const{className:t,value:a="",onChange:i,placeholder:o,type:u="text",autofocus:d,readonly:h,"data-testid":x="Input",...p}=e,g=(0,n.useRef)(),[m,j]=(0,n.useState)(!1),[f,v]=(0,n.useState)(a?.length),C=m&&!h;return(0,n.useEffect)((()=>{d&&(j(!0),g.current.focus())}),[d]),(0,c.jsxs)(r.z,{gap:"4",className:(0,s.x)("",{[l.readonly]:h},[t]),children:[o&&(0,c.jsx)("div",{className:l.placeholder,children:`${o}> `}),(0,c.jsxs)("div",{className:l.caretWrapper,children:[(0,c.jsx)("input",{ref:g,type:u,value:a,onChange:e=>{i?.(e.target.value),v(e.target.value.length)},className:l.input,onFocus:()=>{j(!0)},onBlur:()=>{j(!1)},onSelect:e=>{v(e?.target?.selectionStart||0)},readOnly:h,...p}),C&&(0,c.jsx)("span",{className:l.caret,style:{left:8.8*f+"px"}})]})]})}},8697:function(e,t,a){a.d(t,{D:function(){return h},K:function(){return k}});var n,s=a(6540);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r.apply(null,arguments)}var l=e=>s.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none"},e),n||(n=s.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L17 13a.97.97 0 0 0-.321 1.092L18 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.97.97 0 0 0 5 13L1.38 9.743C.64 9.17 1.053 8 1.99 8h5.087a.99.99 0 0 0 .926-.633l2.07-5.734z"}))),c=a(3377),i=a(6314),o=a(35),u=a(5701),d=a(4848);const h=(0,s.memo)((e=>{const{className:t,isLoading:a,data:n,digits:s=2}=e,r=n?.reduce(((e,t)=>e+t.rate),0)||0,h=n?.length||0,x=parseFloat((r/h||0).toFixed(s));return a?(0,d.jsx)(i.E,{width:150,height:30}):(0,d.jsxs)(o.z,{gap:"8",className:t,children:[(0,d.jsx)(c.I,{inverted:!0,width:30,height:30,style:{fill:"goldenrod"},Svg:l}),(0,d.jsx)(u.EY,{size:u.$C.L,text:`${x}(${h})`})]})}));var x=a(42),p=a(1836),g=a(5523),m=a(6232),j=a(8568),f=a(423),v={starIcon:"Z1C6YFZ0",hovered:"QpbxqwVr",selected:"ouStZWWc"};const C=(0,s.memo)((e=>{const{className:t,onSelect:a,size:n=30,selectedStars:r=0}=e,[i,u]=(0,s.useState)(r),[h,x]=(0,s.useState)(!1),[p,g]=(0,s.useState)(Boolean(r));(0,s.useEffect)((()=>{u(r),g(Boolean(r))}),[r]);const m=(0,s.useCallback)((e=>()=>{p||(g(!0),u(e+1),a?.(e+1))}),[p,a]),j=(0,s.useCallback)((e=>()=>{p||(x(!0),u(e+1))}),[p]),C=(0,s.useCallback)((()=>{p||u(0)}),[p]),y=e=>({[v.hovered]:(h||p)&&e<i,[v.selected]:p});return(0,d.jsx)(o.z,{max:!0,gap:"4",className:(0,f.x)(v.StarRating,{},[t]),children:new Array(5).fill(0).map(((e,t)=>(0,d.jsx)(c.I,{onClick:m(t),onMouseEnter:j(t),onMouseLeave:C,className:(0,f.x)(v.starIcon,y(t)),Svg:l,width:n,height:n},t)))})}));var y=a(159),N=a(6142);const k=(0,s.memo)((e=>{const{className:t,title:a,feedbackTitle:n,hasFeedback:r,onCancel:l,onAccept:c,rate:i=0}=e,{t:h}=(0,N.B)(),[f,v]=(0,s.useState)(i),[k,S]=(0,s.useState)(!1),[E,I]=(0,s.useState)(""),L=(0,s.useCallback)((e=>{v(e),r?S(!0):c?.(e)}),[r,c]),b=(0,s.useCallback)((()=>{S(!1),c?.(f,E)}),[c,f,E]),w=(0,s.useCallback)((()=>{S(!1),v(0),I(""),l?.(f)}),[l,f]),O=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.EY,{title:n}),(0,d.jsx)(m.p,{value:E,onChange:e=>{I(e)},placeholder:h("Ваш отзыв")})]});return(0,d.jsxs)(p.Z,{max:!0,className:t,children:[(0,d.jsxs)(o.T,{max:!0,align:"center",gap:"8",children:[(0,d.jsx)(u.EY,{title:f?h("Спасибо за оценку!"):a}),(0,d.jsx)(C,{size:40,onSelect:L,selectedStars:f})]}),r&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.S7,{children:(0,d.jsx)(j.a,{onClose:w,isOpen:k,children:(0,d.jsxs)(o.T,{max:!0,gap:"32",children:[O,(0,d.jsxs)(o.z,{max:!0,gap:"16",justify:"end",children:[(0,d.jsx)(x.$n,{onClick:w,theme:x.Ox.OUTLINE_RED,children:h("Закрыть")}),(0,d.jsx)(x.$n,{onClick:b,theme:x.Ox.OUTLINE_GREEN,children:h("Отправить")})]})]})})}),(0,d.jsx)(y.IM,{children:(0,d.jsx)(g._,{isOpen:k,onClose:w,children:(0,d.jsxs)(o.T,{max:!0,gap:"32",children:[O,(0,d.jsx)(x.$n,{fullWidth:!0,onClick:b,theme:x.Ox.OUTLINE_GREEN,children:h("Отправить")})]})})})]})]})}))}}]);