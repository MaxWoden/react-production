"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[543],{596:(e,n,a)=>{a.d(n,{Z:()=>l});var t,r=a(7294);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},o.apply(null,arguments)}const l=function(e){return r.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),t||(t=r.createElement("path",{fillRule:"evenodd",d:"m3.99 16.854-1.314 3.504a.75.75 0 0 0 .966.965l3.503-1.314a3 3 0 0 0 1.068-.687L18.36 9.175s-.354-1.061-1.414-2.122-2.122-1.414-2.122-1.414L4.677 15.786a3 3 0 0 0-.687 1.068m12.249-12.63 1.383-1.383c.248-.248.579-.406.925-.348.487.08 1.232.322 1.934 1.025.703.703.945 1.447 1.025 1.934.058.346-.1.677-.348.925L19.774 7.76s-.353-1.06-1.414-2.12c-1.06-1.062-2.121-1.415-2.121-1.415z",clipRule:"evenodd"})))}},2543:(e,n,a)=>{a.r(n),a.d(n,{default:()=>te});var t,r=a(5893),o=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.data},l=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.error},c=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.isLoading},i=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.readonly},u=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.validateErrors},s=a(4268),d=a(9381),f=(0,s.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,t=void 0,o=function(){var a,t,r,o;return function(e,n){var a,t,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(c){return function(i){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,c[0]&&(o=0)),o;)try{if(a=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,t=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],t=0}finally{a=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(l){switch(l.label){case 0:if(a=n.extra,t=n.rejectWithValue,!e)return[2,t("error")];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.api.get("".concat(d.h3.profile).concat(e))];case 2:if(!(r=l.sent().data))throw new Error;return[2,r];case 3:return o=l.sent(),console.log(o),[2,t("error")];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function l(e){try{i(o.next(e))}catch(e){n(e)}}function c(e){try{i(o.throw(e))}catch(e){n(e)}}function i(n){var a;n.done?e(n.value):(a=n.value,a instanceof r?a:new r((function(e){e(a)}))).then(l,c)}i((o=o.apply(a,t||[])).next())}));var a,t,r,o})),v=function(e){var n;return null===(n=null==e?void 0:e.profile)||void 0===n?void 0:n.form};!function(e){e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR",e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_CITY="INCORRECT_CITY"}(t||(t={}));var p,h=(0,s.hg)("profile/updateProfileData",(function(e,n){return a=void 0,r=void 0,l=function(){var e,a,r,o,l,c,i;return function(e,n){var a,t,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function c(c){return function(i){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,c[0]&&(o=0)),o;)try{if(a=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,t=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],t=0}finally{a=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(u){switch(u.label){case 0:if(e=n.extra,a=n.rejectWithValue,r=n.getState,(null==(o=v(r()))?void 0:o.id)||a([t.SERVER_ERROR]),(l=function(e){if(!e)return[t.NO_DATA];var n=e.firstname,a=e.lastname,r=e.age,o=e.city,l=[];return n&&a||l.push(t.INCORRECT_USER_DATA),r&&Number.isInteger(r)||l.push(t.INCORRECT_AGE),o||l.push(t.INCORRECT_CITY),l}(o)).length)return[2,a(l)];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(null==o?void 0:o.id),o)];case 2:if(!(c=u.sent().data))throw new Error;return[2,c];case 3:return i=u.sent(),console.log(i),[2,a([t.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function t(e){try{i(l.next(e))}catch(e){n(e)}}function c(e){try{i(l.throw(e))}catch(e){n(e)}}function i(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(t,c)}i((l=l.apply(a,r||[])).next())}));var a,r,o,l})),y=function(){return y=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},y.apply(this,arguments)},g=(0,s.oM)({name:"profile",initialState:{data:void 0,isLoading:!1,error:void 0,readonly:!0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},updateProfile:function(e,n){e.form=y(y({},e.form),n.payload)},saveEdit:function(e){e.readonly=!0,e.data=e.form},cancelEdit:function(e){e.readonly=!0,e.form=e.data,e.validateErrors=void 0}},extraReducers:function(e){e.addCase(f.pending,(function(e){e.isLoading=!0,e.error=void 0})).addCase(f.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(f.rejected,(function(e,n){e.isLoading=!1,e.readonly=!0,e.error=n.payload})).addCase(h.pending,(function(e){e.isLoading=!0,e.validateErrors=void 0})).addCase(h.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0,e.validateErrors=void 0})).addCase(h.rejected,(function(e,n){e.isLoading=!1,e.readonly=!0,e.validateErrors=n.payload}))}}),m=g.actions,C=g.reducer;!function(e){e.RU="Russia",e.BY="Belarus",e.UA="Ukraine",e.AM="Armenia",e.KZ="Kazakhstan"}(p||(p={}));var x,R=a(7294),b=a(2327),j=a(4743),E=[{value:p.AM,content:"Армения"},{value:p.BY,content:"Беларусь"},{value:p.KZ,content:"Казахстан"},{value:p.RU,content:"Россия"},{value:p.UA,content:"Украина"}],N=(0,R.memo)((function(e){var n=e.className,a=e.readonly,t=e.value,o=e.onChange,l=(0,b.$)().t,c=(0,R.useCallback)((function(e){null==o||o(e)}),[o]);return(0,r.jsx)(j.P,{className:n,label:l("Укажите страну"),readonly:a,options:E,value:t,onSelect:c})}));!function(e){e.USD="USD",e.EUR="EUR",e.RUB="RUB"}(x||(x={}));var O=[{value:x.RUB,content:"Рубли"},{value:x.EUR,content:"Евро"},{value:x.USD,content:"Доллары"}],w=(0,R.memo)((function(e){var n=e.className,a=e.readonly,t=e.value,o=e.onChange,l=(0,b.$)().t,c=(0,R.useCallback)((function(e){null==o||o(e)}),[o]);return(0,r.jsx)(j.P,{className:n,label:l("Укажите валюту"),readonly:a,options:O,value:t,onSelect:c})})),A=a(4611),S=a(1911),T=a(4456),I=a(0),k=a(1390),U=a(9312);const _="wW9jgKKD",P="ZTyX8_n9";var L,D=function(e){var n,a=e.className,t=e.data,o=e.isLoading,l=e.error,c=e.readonly,i=e.onChangeFirstname,u=e.onChangeLastname,s=e.onChangeAge,d=e.onChangeCity,f=e.onChangeUsername,v=e.onChangeAvatar,p=e.onChangeCurrency,h=e.onChangeCountry,y=(0,b.$)().t;if(o)return(0,r.jsx)(k.U,{max:!0,justify:"center",className:(0,A.A)(_,{},["t07ZxFGs",a]),children:(0,r.jsx)(I.a,{})});if(l)return(0,r.jsx)(k.U,{justify:"center",max:!0,className:(0,A.A)(_,{},["i5YK3SSb",a]),children:(0,r.jsx)(U.xv,{align:U.PH.CENTER,theme:U.lg.ERROR,title:y("Произошла ошибка при загрузке страницы"),text:y("Попробуйте обновить страницу")})});var g=((n={}).DjTe7269=!c,n);return(0,r.jsxs)(k.g,{align:"none",max:!0,gap:"16",className:(0,A.A)(_,g,[a]),children:[(null==t?void 0:t.avatar)&&(0,r.jsx)(k.U,{justify:"center",children:(0,r.jsx)(S.q,{alt:"avatar",src:null==t?void 0:t.avatar})}),(0,r.jsx)(T.I,{readonly:c,onChange:i,className:P,value:null==t?void 0:t.firstname,placeholder:y("Ваше имя")}),(0,r.jsx)(T.I,{readonly:c,onChange:u,className:P,value:null==t?void 0:t.lastname,placeholder:y("Ваша фамилия")}),(0,r.jsx)(T.I,{readonly:c,onChange:s,className:P,value:String(null==t?void 0:t.age),placeholder:y("Ваш возраст")}),(0,r.jsx)(T.I,{readonly:c,onChange:d,className:P,value:null==t?void 0:t.city,placeholder:y("Ваш город")}),(0,r.jsx)(T.I,{readonly:c,onChange:f,className:P,value:String(null==t?void 0:t.username),placeholder:y("Ваше имя пользователя")}),(0,r.jsx)(T.I,{readonly:c,onChange:v,className:P,value:String(null==t?void 0:t.avatar),placeholder:y("Введите ссылку на аватар")}),(0,r.jsx)(N,{readonly:c,value:null==t?void 0:t.country,className:P,onChange:h}),(0,r.jsx)(w,{readonly:c,value:null==t?void 0:t.currency,className:P,onChange:p})]})},B=a(3942);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},G.apply(null,arguments)}const M=function(e){return R.createElement("svg",G({xmlns:"http://www.w3.org/2000/svg",width:800,height:800,viewBox:"0 0 512 512"},e),L||(L=R.createElement("path",{fillRule:"evenodd",d:"M420.48 121.813 390.187 91.52 256 225.92 121.813 91.52 91.52 121.813l134.4 134.188-134.4 134.186 30.293 30.293L256 286.08l134.187 134.4 30.293-30.293L286.08 256z"})))};var W;function K(){return K=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},K.apply(null,arguments)}const V=function(e){return R.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:800,height:800,viewBox:"0 0 492 492"},e),W||(W=R.createElement("path",{d:"m484.128 104.478-16.116-16.116c-5.064-5.068-11.816-7.856-19.024-7.856s-13.964 2.788-19.028 7.856L203.508 314.81 62.024 173.322c-5.064-5.06-11.82-7.852-19.028-7.852-7.204 0-13.956 2.792-19.024 7.852l-16.12 16.112C2.784 194.51 0 201.27 0 208.47c0 7.204 2.784 13.96 7.852 19.028l159.744 159.736c.212.3.436.58.696.836l16.12 15.852c5.064 5.048 11.82 7.572 19.084 7.572h.084c7.212 0 13.968-2.524 19.024-7.572l16.124-15.992c.26-.256.48-.468.612-.684l244.784-244.76c10.5-10.476 10.5-27.52.004-38.008"})))};var Y=a(596),Z=a(5461),z=a(219),F=a(5470),$=a(8325);const q="CZmhQU1N";var H=function(e){var n=(0,b.$)().t,a=e.className,t=e.readonly,l=(0,Z.T)(),c=(0,B.v9)(o),i=(0,B.v9)(F.m5),u=(null==c?void 0:c.id)===(null==i?void 0:i.id),s=(0,R.useCallback)((function(){l(m.setReadonly(!1))}),[l]),d=(0,R.useCallback)((function(){!l(h()).then((function(e){return null==e?void 0:e.payload}))&&l(m.saveEdit())}),[l]),f=(0,R.useCallback)((function(){l(m.cancelEdit())}),[l]);return(0,r.jsxs)($.U,{justify:"between",max:!0,className:a,children:[(0,r.jsx)(U.xv,{title:n(u?"Ваш профиль":"Профиль")}),u?t?(0,r.jsx)(z.zx,{onClick:s,theme:z.bn.OUTLINE,children:(0,r.jsxs)($.U,{gap:"16",children:[(0,r.jsx)(Y.Z,{className:(0,A.A)(q,{},["ik6RYgje"])}),n("Редактировать")]})}):(0,r.jsxs)($.U,{className:"A0xDMvED",gap:"32",children:[(0,r.jsx)(z.zx,{onClick:d,theme:z.bn.OUTLINE_GREEN,children:(0,r.jsxs)($.U,{gap:"16",children:[(0,r.jsx)(V,{className:(0,A.A)(q,{},["R7emLfqP"])}),n("Сохранить")]})}),(0,r.jsx)(z.zx,{onClick:f,theme:z.bn.OUTLINE_RED,children:(0,r.jsxs)($.U,{gap:"16",children:[(0,r.jsx)(M,{className:(0,A.A)(q,{},["_9SBwQomw"])}),n("Отменить")]})})]}):null]})};var Q=a(6974),X=a(9585),J=a(6308),ee=a(9950),ne={profile:C},ae=function(){var e,n=(0,b.$)().t,a=(0,Z.T)(),o=(0,Q.UO)().id,s=(0,B.v9)(v),d=(0,B.v9)(l),p=(0,B.v9)(c),h=(0,B.v9)(i),y=(0,B.v9)(u),g=((e={})[t.INCORRECT_AGE]=n("Неккоректный возраст"),e[t.INCORRECT_CITY]=n("Неккоректный регион"),e[t.INCORRECT_USER_DATA]=n("Имя и фамилия обязательны"),e[t.NO_DATA]=n("Данные не указаны"),e[t.SERVER_ERROR]=n("Ошибка сервера"),e);(0,J.Q)((function(){return a(f(o))}));var C=(0,R.useCallback)((function(e){a(m.updateProfile({firstname:e||""}))}),[a]),x=(0,R.useCallback)((function(e){a(m.updateProfile({lastname:e||""}))}),[a]),j=(0,R.useCallback)((function(e){a(m.updateProfile({age:0|Number(e)}))}),[a]),E=(0,R.useCallback)((function(e){a(m.updateProfile({city:e||""}))}),[a]),N=(0,R.useCallback)((function(e){a(m.updateProfile({username:e||""}))}),[a]),O=(0,R.useCallback)((function(e){a(m.updateProfile({avatar:e||""}))}),[a]),w=(0,R.useCallback)((function(e){a(m.updateProfile({currency:e}))}),[a]),S=(0,R.useCallback)((function(e){a(m.updateProfile({country:e}))}),[a]);return(0,r.jsx)(X.W,{reducers:ne,children:(0,r.jsx)(ee.T3,{children:(0,r.jsxs)(k.g,{gap:"32",className:(0,A.A)("r28lASuD",{},[]),children:[(0,r.jsx)(H,{readonly:h}),(null==y?void 0:y.length)&&y.map((function(e){return(0,r.jsx)(U.xv,{theme:U.lg.ERROR,text:g[e]},e)})),(0,r.jsx)(D,{data:s,isLoading:p,error:d,readonly:h,onChangeFirstname:C,onChangeLastname:x,onChangeAge:j,onChangeCity:E,onChangeUsername:N,onChangeAvatar:O,onChangeCurrency:w,onChangeCountry:S})]})})})};const te=(0,R.memo)(ae)},9585:(e,n,a)=>{a.d(n,{W:()=>l});var t=a(5893),r=a(7294),o=a(3942),l=function(e){var n=e.children,a=e.reducers,l=e.removeAfterRemount,c=void 0===l||l,i=(0,o.I0)(),u=(0,o.oR)();return(0,r.useEffect)((function(){var e=u.reducerManager.getReducerMap();if(Object.entries(a).forEach((function(n){var a=n[0],t=n[1];a in e||(u.reducerManager.add(a,t),i({type:"@INIT ".concat(a," reducer")}))})),c)return function(){Object.entries(a).forEach((function(e){var n=e[0];u.reducerManager.remove(n),i({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,t.jsx)(t.Fragment,{children:n})}},4456:(e,n,a)=>{a.d(n,{I:()=>u});var t=a(5893),r=a(7294),o=a(4611);const l={input:"LVdIPwcx",caretWrapper:"y1GiFC_L",caret:"lqMFGBuL",readonly:"fTN1PnWu"};var c=a(1390),i=function(){return i=Object.assign||function(e){for(var n,a=1,t=arguments.length;a<t;a++)for(var r in n=arguments[a])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},i.apply(this,arguments)},u=(0,r.memo)((function(e){var n,a=e.className,u=e.value,s=void 0===u?"":u,d=e.onChange,f=e.placeholder,v=e.type,p=void 0===v?"text":v,h=e.autofocus,y=e.readonly,g=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)n.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(a[t[r]]=e[t[r]])}return a}(e,["className","value","onChange","placeholder","type","autofocus","readonly"]),m=(0,r.useRef)(),C=(0,r.useState)(!1),x=C[0],R=C[1],b=(0,r.useState)(null==s?void 0:s.length),j=b[0],E=b[1],N=x&&!y;return(0,r.useEffect)((function(){h&&(R(!0),m.current.focus())}),[]),(0,t.jsxs)(c.U,{gap:"4",className:(0,o.A)("",(n={},n[l.readonly]=y,n),[a]),children:[f&&(0,t.jsx)("div",{className:l.placeholder,children:"".concat(f,"> ")}),(0,t.jsxs)("div",{className:l.caretWrapper,children:[(0,t.jsx)("input",i({ref:m,type:p,value:s,onChange:function(e){null==d||d(e.target.value),E(e.target.value.length)},className:l.input,onFocus:function(){R(!0)},onBlur:function(){R(!1)},onSelect:function(e){var n;E((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)},readOnly:y},g)),N&&(0,t.jsx)("span",{className:l.caret,style:{left:"".concat(8.8*j,"px")}})]})]})}))},4743:(e,n,a)=>{a.d(n,{P:()=>l});var t=a(5893),r=a(7294),o=a(4611);var l=function(e){var n,a=e.className,l=e.options,c=e.onSelect,i=e.label,u=e.value,s=e.readonly,d=(0,r.useState)(!1),f=d[0],v=d[1],p=(0,r.useState)(l[0]),h=p[0],y=p[1];(0,r.useEffect)((function(){u&&y(l.find((function(e){return e.value===u})))}),[u]),(0,r.useEffect)((function(){s&&v(!1)}),[s]);var g=(0,r.useCallback)((function(e,n){e.stopPropagation(),c(n.value),y(n),v(!1)}),[]),m=function(){s||v((function(e){return!e}))},C=(0,r.useMemo)((function(){return null==l?void 0:l.map((function(e){var n;return(0,t.jsx)("li",{className:(0,o.A)("zZgj2JgW",(n={},n.rKHhU8sR=h.value===e.value,n)),onClick:function(n){return g(n,e)},children:e.content},e.value)}))}),[l,h]);return(0,t.jsxs)("div",{className:(0,o.A)("eXu4wq7K",(n={},n.HaBgyfSK=s,n),[a]),children:[i&&(0,t.jsx)("span",{className:"G1uuf7Bp",children:"".concat(i,">")}),(0,t.jsx)("div",{className:"t4ay1peO",onClick:m,children:h.content}),f&&(0,t.jsx)("ul",{className:"xWiG1Vj4",onClick:m,children:C})]})}}}]);