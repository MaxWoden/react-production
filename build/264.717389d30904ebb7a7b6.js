"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[264],{8264:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var o,r=t(5893),a=t(7168),i=t(9669),c=t.n(i),l=t(3362),u=t(7665);!function(e){e.INCORRECT_DATA="",e.SERVER_ERROR=""}(o||(o={}));var s=(0,a.hg)("login/loginByUsername",(function(e,n){return t=void 0,o=void 0,a=function(){var t,o;return function(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],o=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,c().post("http://localhost:8000/login",e)];case 1:if(!(t=r.sent().data))throw new Error;return localStorage.setItem(u.z,JSON.stringify(t)),n.dispatch(l.hI.setAuthData(t)),[2,t];case 2:return o=r.sent(),console.log(o),[2,n.rejectWithValue("Вы ввели неверный логин или пароль")];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function i(e){try{l(a.next(e))}catch(e){n(e)}}function c(e){try{l(a.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}l((a=a.apply(t,o||[])).next())}));var t,o,r,a})),d=(0,a.oM)({name:"login",initialState:{username:"",password:"",isLoading:!1},reducers:{setUsername:function(e,n){e.username=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(s.pending,(function(e){e.error=void 0,e.isLoading=!0})),e.addCase(s.fulfilled,(function(e){e.isLoading=!1})),e.addCase(s.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),f=d.actions,v=d.reducer,p=t(7294),h=t(2327),m=t(9704),y=t(4611),g=t(219);var b=function(){return b=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},b.apply(this,arguments)},x=(0,p.memo)((function(e){var n=e.className,t=e.value,o=void 0===t?"":t,a=e.onChange,i=e.placeholder,c=e.type,l=void 0===c?"text":c,u=e.autofocus,s=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(e,["className","value","onChange","placeholder","type","autofocus"]),d=(0,h.$)().t,f=(0,p.useRef)(),v=(0,p.useState)(!1),m=v[0],g=v[1],x=(0,p.useState)(o.length),j=x[0],w=x[1],O=function(){g(!1)};return(0,p.useCallback)((function(e){"Escape"===e.key&&O()}),[]),(0,p.useEffect)((function(){u&&(g(!0),f.current.focus())}),[]),(0,r.jsxs)("div",b({className:(0,y.A)("LuFDUWoP",{},[n])},{children:[i&&(0,r.jsx)("div",b({className:"emAQQ85i"},{children:"".concat(d(i),">")}),void 0),(0,r.jsxs)("div",b({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",b({ref:f,type:l,value:o,onChange:function(e){null==a||a(e.target.value),w(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){g(!0)},onBlur:O,onSelect:function(e){var n;w((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)||0)}},s),void 0),m&&(0,r.jsx)("span",{className:"lqMFGBuL",style:{left:"".concat(8.8*j,"px")}},void 0)]}),void 0)]}),void 0)})),j=t(9312),w=function(e){var n;return null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.error},O=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.isLoading)||!1},C=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.password)||""},E=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.username)||""};const N="PQPa1eB5";var k=function(e){var n=e.children,t=e.reducers,o=e.removeAfterRemount,a=void 0===o||o,i=(0,m.I0)(),c=(0,m.oR)();return(0,p.useEffect)((function(){if(Object.entries(t).forEach((function(e){var n=e[0],t=e[1];c.reducerManager.add(n,t),i({type:"@INIT ".concat(n," reducer")})})),a)return function(){Object.entries(t).forEach((function(e){var n=e[0];c.reducerManager.remove(n),i({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n},void 0)},R=function(){return R=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},R.apply(this,arguments)},S={loginForm:v};const P=(0,p.memo)((function(e){var n=e.className,t=(0,h.$)().t,o=(0,m.I0)(),a=(0,m.v9)(E),i=(0,m.v9)(C),c=(0,m.v9)(w),l=(0,m.v9)(O),u=(0,p.useCallback)((function(e){o(f.setUsername(e))}),[o]),d=(0,p.useCallback)((function(e){o(f.setPassword(e))}),[o]),v=(0,p.useCallback)((function(){o(s({username:a,password:i}))}),[o,i,a]);return(0,r.jsxs)(k,R({reducers:S},{children:[(0,r.jsxs)("div",R({className:(0,y.A)("xYNEfcE9",{},[n])},{children:[(0,r.jsx)(j.x,{title:"Форма авторизации"},void 0),c&&(0,r.jsx)(j.x,{text:c,theme:j.l.ERROR},void 0),(0,r.jsx)(x,{autofocus:!0,placeholder:"Имя пользователя",className:N,value:a,onChange:u},void 0),(0,r.jsx)(x,{placeholder:"Пароль",className:N,value:i,onChange:d},void 0),(0,r.jsx)(g.zx,R({onClick:v,theme:g.bn.OUTLINE,className:"Ok_5amJo",disabled:l},{children:t("Войти")}),void 0)]}),void 0)," "]}),void 0)}))}}]);