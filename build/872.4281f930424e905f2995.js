"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[872],{1836:function(e,t,n){n.d(t,{Z:function(){return s.Z}});var s=n(3334)},1872:function(e,t,n){n.r(t);var s=n(8697),r=n(5283),a=n(6314),l=n(6540),i=n(6142),c=n(1338),o=n(7778),u=n(4848);const d=e=>{const{className:t,profileId:n}=e,{t:d}=(0,i.B)(),h=(0,c.d4)(r.ed),[x]=(0,o.ZL)();if(!h)return null;const{data:f,isLoading:m}=(0,o.oJ)({userId:h?.id,profileId:n}),p=(0,l.useCallback)(((e,t)=>{try{x({userId:h.id,profileId:n,rate:e,feedback:t})}catch(e){console.log(e)}}),[x,n,h.id]);return m?(0,u.jsx)(a.E,{width:"100%",height:120}):(0,u.jsx)(s.K,{rate:f?.[0]?.rate,onAccept:p,className:t,title:d("Оцените профиль"),hasFeedback:!0,feedbackTitle:d("Оставьте свой отзыв о профиле")})};t.default=(0,l.memo)(d)},3334:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(6540),r=n(423),a="t7i88i9v",l=n(4848);const i=(0,s.memo)((e=>{const{className:t,children:n,max:s,...i}=e;return(0,l.jsx)("div",{className:(0,r.x)("GNYonvC5",{[a]:s},[t]),...i,children:n})}))},7778:function(e,t,n){n.d(t,{ZL:function(){return l},ah:function(){return a},oJ:function(){return r}});const s=n(7867).q.injectEndpoints({endpoints:e=>({getProfileRating:e.query({query:e=>{let{userId:t,profileId:n}=e;return{url:"/profile-ratings",params:{userId:t,profileId:n}}}}),getAllProfileRatings:e.query({query:e=>({url:"/profile-ratings",params:{profileId:e}})}),rateArticle:e.mutation({query:e=>({url:"/profile-ratings",method:"POST",body:e})})})}),r=s.useGetProfileRatingQuery,a=s.useGetAllProfileRatingsQuery,l=s.useRateArticleMutation},8697:function(e,t,n){n.d(t,{D:function(){return h},K:function(){return E}});var s,r=n(6540);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(null,arguments)}var l=e=>r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,fill:"none"},e),s||(s=r.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L17 13a.97.97 0 0 0-.321 1.092L18 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.97.97 0 0 0 5 13L1.38 9.743C.64 9.17 1.053 8 1.99 8h5.087a.99.99 0 0 0 .926-.633l2.07-5.734z"}))),i=n(3377),c=n(6314),o=n(35),u=n(5701),d=n(4848);const h=(0,r.memo)((e=>{const{className:t,isLoading:n,data:s,digits:r=2}=e,a=s?.reduce(((e,t)=>e+t.rate),0)||0,h=s?.length||0,x=parseFloat((a/h||0).toFixed(r));return n?(0,d.jsx)(c.E,{width:150,height:30}):(0,d.jsxs)(o.z,{gap:"8",className:t,children:[(0,d.jsx)(i.I,{inverted:!0,width:30,height:30,style:{fill:"goldenrod"},Svg:l}),(0,d.jsx)(u.EY,{size:u.$C.L,text:`${x}(${h})`})]})}));var x=n(42),f=n(1836),m=n(5523),p=n(6232),g=n(8568),j=n(423),k={starIcon:"Z1C6YFZ0",hovered:"QpbxqwVr",selected:"ouStZWWc"};const v=(0,r.memo)((e=>{const{className:t,onSelect:n,size:s=30,selectedStars:a=0}=e,[c,u]=(0,r.useState)(a),[h,x]=(0,r.useState)(!1),[f,m]=(0,r.useState)(Boolean(a));(0,r.useEffect)((()=>{u(a),m(Boolean(a))}),[a]);const p=(0,r.useCallback)((e=>()=>{f||(m(!0),u(e+1),n?.(e+1))}),[f,n]),g=(0,r.useCallback)((e=>()=>{f||(x(!0),u(e+1))}),[f]),v=(0,r.useCallback)((()=>{f||u(0)}),[f]),C=e=>({[k.hovered]:(h||f)&&e<c,[k.selected]:f});return(0,d.jsx)(o.z,{max:!0,gap:"4",className:(0,j.x)(k.StarRating,{},[t]),children:new Array(5).fill(0).map(((e,t)=>(0,d.jsx)(i.I,{onClick:p(t),onMouseEnter:g(t),onMouseLeave:v,className:(0,j.x)(k.starIcon,C(t)),Svg:l,width:s,height:s},t)))})}));var C=n(159),b=n(6142);const E=(0,r.memo)((e=>{const{className:t,title:n,feedbackTitle:s,hasFeedback:a,onCancel:l,onAccept:i,rate:c=0}=e,{t:h}=(0,b.B)(),[j,k]=(0,r.useState)(c),[E,I]=(0,r.useState)(!1),[N,S]=(0,r.useState)(""),w=(0,r.useCallback)((e=>{k(e),a?I(!0):i?.(e)}),[a,i]),y=(0,r.useCallback)((()=>{I(!1),i?.(j,N)}),[i,j,N]),L=(0,r.useCallback)((()=>{I(!1),k(0),S(""),l?.(j)}),[l,j]),O=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.EY,{title:s}),(0,d.jsx)(p.p,{value:N,onChange:e=>{S(e)},placeholder:h("Ваш отзыв")})]});return(0,d.jsxs)(f.Z,{max:!0,className:t,children:[(0,d.jsxs)(o.T,{max:!0,align:"center",gap:"8",children:[(0,d.jsx)(u.EY,{title:j?h("Спасибо за оценку!"):n}),(0,d.jsx)(v,{size:40,onSelect:w,selectedStars:j})]}),a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(C.S7,{children:(0,d.jsx)(g.a,{onClose:L,isOpen:E,children:(0,d.jsxs)(o.T,{max:!0,gap:"32",children:[O,(0,d.jsxs)(o.z,{max:!0,gap:"16",justify:"end",children:[(0,d.jsx)(x.$n,{onClick:L,theme:x.Ox.OUTLINE_RED,children:h("Закрыть")}),(0,d.jsx)(x.$n,{onClick:y,theme:x.Ox.OUTLINE_GREEN,children:h("Отправить")})]})]})})}),(0,d.jsx)(C.IM,{children:(0,d.jsx)(m._,{isOpen:E,onClose:L,children:(0,d.jsxs)(o.T,{max:!0,gap:"32",children:[O,(0,d.jsx)(x.$n,{fullWidth:!0,onClick:y,theme:x.Ox.OUTLINE_GREEN,children:h("Отправить")})]})})})]})]})}))}}]);