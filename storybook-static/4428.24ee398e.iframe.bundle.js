"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[4428],{"./src/features/articleRating/ui/ArticleRating/ArticleRating.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_entities_Rating__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/entities/Rating/index.ts"),_entities_User__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/entities/User/index.ts"),_shared_ui_Skeleton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/shared/ui/Skeleton/index.ts"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),react_i18next__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-i18next/dist/es/useTranslation.js"),react_redux__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react-redux/es/index.js"),_api_articleRatingApi__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/features/articleRating/api/articleRatingApi.ts");const ArticleRating=props=>{const{className:className,articleId:articleId}=props,{t:t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.B)(),userData=(0,react_redux__WEBPACK_IMPORTED_MODULE_5__.d4)(_entities_User__WEBPACK_IMPORTED_MODULE_2__.ed),[rateArticleMutation]=(0,_api_articleRatingApi__WEBPACK_IMPORTED_MODULE_6__._W)();if(!userData)return null;const{data:data,isLoading:isLoading}=(0,_api_articleRatingApi__WEBPACK_IMPORTED_MODULE_6__.lD)({userId:userData?.id,articleId:articleId}),onAccept=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(((starsCount,feedback)=>{try{rateArticleMutation({userId:userData.id,articleId:articleId,rate:starsCount,feedback:feedback})}catch(error){console.log(error)}}),[rateArticleMutation,articleId,userData.id]);return isLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_shared_ui_Skeleton__WEBPACK_IMPORTED_MODULE_3__.E,{width:"100%",height:120}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_entities_Rating__WEBPACK_IMPORTED_MODULE_1__.K,{rate:data?.[0]?.rate,onAccept:onAccept,className:className,title:t("Оцените статью"),hasFeedback:!0,feedbackTitle:t("Оставьте свой отзыв о статье, это поможет улучшить качество статей")})};__webpack_exports__.default=(0,react__WEBPACK_IMPORTED_MODULE_4__.memo)(ArticleRating),ArticleRating.__docgenInfo={description:"",methods:[],displayName:"ArticleRating",props:{className:{required:!1,tsType:{name:"string"},description:""},articleId:{required:!0,tsType:{name:"string"},description:""}}}}}]);